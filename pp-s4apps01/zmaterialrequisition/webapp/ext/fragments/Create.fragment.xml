<core:FragmentDefinition xmlns:core="sap.ui.core"
    xmlns:mvc="sap.ui.core.mvc" displayBlock="true"
    xmlns="sap.m"
    xmlns:layout="sap.ui.layout"
    xmlns:table="sap.ui.table" core:require="{ handler: 'pp/zmaterialrequisition/ext/controller/ListReportExt' }">
    <Dialog id="idCreateDialog" title="{i18n>RegistrationScreen}">
        <Panel expandable="true" expanded="true" width="auto">
            <HBox>
                <VBox class="sapUiSmallMarginEnd">
                    <Label text="{i18n>Plant}:" required="true"/>
                    <ComboBox id="idPlant" items="{ path: '/ZC_PlantVH' }" selectedKey="{local>/headSet/Plant}" filterSecondaryValues= "true" required="true" change="handler.handleChange" width="11rem">
                        <core:ListItem key="{Plant}" text="{PlantName}({Plant})" additionalText="{Plant}"/>
                    </ComboBox>
                    <Label text="{i18n>Type}:" required="true"/>
                    <ComboBox id="idType" items="{ path: '/ZC_ApplicationTypeVH' }" selectedKey="{local>/headSet/Type}" filterSecondaryValues= "true" required="true" change="handler.handleChange" width="11rem">
                        <core:ListItem key="{Zvalue1}" text="{Zvalue2}({Zvalue1})" additionalText="{Zvalue1}"/>
                    </ComboBox>
                </VBox>
                <VBox class="sapUiSmallMarginEnd">
                    <Label text="{i18n>MaterialRequisitionNo}:"/>
                    <Input value="{local>/headSet/MaterialRequisitionNo}" editable="false" width="11rem"/>
                    <Label text="{i18n>HeaderCreatedDate}:"/>
                    <DatePicker width="11rem" editable="false" value="{
						'path':'local>/headSet/HeaderCreatedDate',
						'type':'sap.ui.model.type.Date',
						'formatOptions': {
							'pattern': 'yyyy/MM/dd',
                            'UTC':true
						} 
                    }"/>
                </VBox>
                <VBox class="sapUiSmallMarginEnd">
                    <Label text="{i18n>CostCenter}:" required="{= ${local>/headSet/Type} === '01'}"/>
                    <Input id="idCostCenter" value="{local>/headSet/CostCenter}" change="handler.handleChange" showValueHelp="true" valueHelpRequest="handler.ValueHelpDialog.onValueHelpRequested(
                        $event, $controller, '/ZC_CostCenterVH',
                        ['CostCenter','CostCenterName'])" showSuggestion="true" suggestionRows="{ path: '/ZC_CostCenterVH', length: 10 }" required="{= ${local>/headSet/Type} === '01'}" width="11rem">
                        <suggestionColumns>
                            <Column>
                                <Label text="{i18n>CostCenter}"/>
                            </Column>
                            <Column>
                                <Label text="{i18n>CostCenterName}"/>
                            </Column>
                        </suggestionColumns>
                        <suggestionRows>
                            <ColumnListItem>
                                <Label text="{CostCenter}" />
                                <Label text="{CostCenterName}" />
                            </ColumnListItem>
                        </suggestionRows>
                    </Input>
                    <Label text="{i18n>CostCenterName}:"/>
                    <Input value="{local>/headSet/CostCenterName}" editable="false" width="11rem"/>
                </VBox>
                <VBox class="sapUiSmallMarginEnd">
                    <Label text="{i18n>Customer}:" required="true"/>
                    <Input id="idCustomer" value="{local>/headSet/Customer}" change="handler.handleChange" showValueHelp="true" valueHelpRequest="handler.ValueHelpDialog.onValueHelpRequested(
                        $event, $controller, '/I_Customer_VH', ['Customer','CustomerName'])" showSuggestion="true" suggestionRows="{ path: '/I_Customer_VH', length: 10 }" required="true" width="11rem">
                        <suggestionColumns>
                            <Column>
                                <Label text="{i18n>Customer}"/>
                            </Column>
                            <Column>
                                <Label text="{i18n>CustomerName}"/>
                            </Column>
                        </suggestionColumns>
                        <suggestionRows>
                            <ColumnListItem>
                                <Label text="{Customer}" />
                                <Label text="{CustomerName}" />
                            </ColumnListItem>
                        </suggestionRows>
                    </Input>
                    <Label text="{i18n>CustomerName}:"/>
                    <Input value="{local>/headSet/CustomerName}" editable="false" width="11rem"/>
                </VBox>
                <VBox class="sapUiSmallMarginEnd">
                    <Label text="{i18n>Receiver}:" required="true"/>
                    <Input id="idReceiver" value="{local>/headSet/Receiver}" change="handler.handleChange" showValueHelp="true" required="true" width="11rem"/>
                    <Label text="{i18n>RequisitionDate}:" required="true"/>
                    <DatePicker id="idRequisitionDate" required="true" width="11rem" value="{
						'path':'local>/headSet/RequisitionDate',
						'type':'sap.ui.model.type.Date',
						'formatOptions': {
							'pattern': 'yyyy/MM/dd',
                            'UTC':true
						} }"/>
                </VBox>
                <VBox class="sapUiSmallMarginEnd">
                    <Label text="{i18n>ManufacturingOrder}:" required="{= ${local>/headSet/Type} === '01'}"/>
                    <Input id="idManufacturingOrder" value="{local>/headSet/ManufacturingOrder}" change="handler.handleChange" showValueHelp="true" valueHelpRequest="handler.ValueHelpDialog.onValueHelpRequested(
                        $event, $controller, '/ZC_ManufacturingOrderProductVH', 
                        ['ManufacturingOrder','Product','ProductionPlant','ManufacturingOrderType','MfgOrderPlannedStartDate','MfgOrderPlannedEndDate','MRPController'])" showSuggestion="true" suggestionRows="{ path: '/ZC_ManufacturingOrderProductVH', length: 12 }" required="{= ${local>/headSet/Type} === '01'}" width="11rem">
                        <suggestionColumns>
                            <Column>
                                <Label text="{i18n>ManufacturingOrder}"/>
                            </Column>
                            <Column>
                                <Label text="{i18n>Product}"/>
                            </Column>
                        </suggestionColumns>
                        <suggestionRows>
                            <ColumnListItem>
                                <Label text="{ManufacturingOrder}" />
                                <Label text="{Product}" />
                            </ColumnListItem>
                        </suggestionRows>
                    </Input>
                    <Label text="{i18n>Product}:"/>
                    <Input value="{local>/headSet/Product}" editable="false" width="11rem"/>
                </VBox>
                <VBox class="sapUiSmallMarginEnd">
                    <Label text="{i18n>OrderIsClosed}:"/>
                    <Input value="{ path:'local>/headSet/OrderIsClosed',formatter:'handler.formatter.formatOrderStatus' }" editable="false" width="11rem"/>
                    <Label text="{i18n>LineWarehouseStatus}:"/>
                    <CheckBox selected="{local>/headSet/LineWarehouseStatus}"/>
                </VBox>
            </HBox>
        </Panel>
        <Panel expandable="false" expanded="true" width="auto">
            <table:Table rows="{local>/itemSet}" selectionMode="Multi" fixedColumnCount="3" rowMode="Interactive" class="sapUiSizeCompact">
                <table:extension>
                    <OverflowToolbar>
                        <ToolbarSpacer/>
                        <Button icon="sap-icon://save" type="Transparent" text="{i18n>saveBtn}" press="handler.onSave"/>
                        <Button icon="sap-icon://add" type="Transparent" text="{i18n>addBtn}" press="handler.onAddLine" />
                        <Button icon="sap-icon://delete" type="Transparent" text="{i18n>delBtn}" press="handler.onDelLine"/>
                    </OverflowToolbar>
                </table:extension>
                <table:columns>
                    <table:Column width="5rem" label="{i18n>ItemNo}">
                        <table:template>
                            <Text text="{local>ItemNo}" wrapping="false"/>
                        </table:template>
                    </table:Column>
                    <table:Column width="12rem">
                        <Label text="{i18n>Material}" required="true"/>
                        <table:template>
                            <Input value="{local>Material}" showValueHelp="true"/>
                        </table:template>
                    </table:Column>
                    <table:Column width="15rem" label="{i18n>MaterialDescription}">
                        <table:template>
                            <Text text="{local>MaterialDescription}" wrapping="false"/>
                        </table:template>
                    </table:Column>
                    <table:Column width="10rem">
                        <Label text="{i18n>Quantity}" required="true"/>
                        <table:template>
                            <Input type="Number" value="{local>Quantity}" change="handler.handleCalculate"/>
                        </table:template>
                    </table:Column>
                    <table:Column width="4rem" label="{i18n>BaseUnit}">
                        <table:template>
                            <Text text="{local>BaseUnit}" wrapping="false"/>
                        </table:template>
                    </table:Column>
                    <table:Column width="8rem">
                        <Label text="{i18n>StorageLocation}" required="true"/>
                        <table:template>
                            <Input value="{local>StorageLocation}" showValueHelp="true"/>
                        </table:template>
                    </table:Column>
                    <table:Column width="12rem" label="{i18n>StorageLocationName}">
                        <table:template>
                            <Text text="{local>StorageLocationName}" wrapping="false"/>
                        </table:template>
                    </table:Column>
                    <table:Column width="15rem" label="{i18n>Remark}">
                        <table:template>
                            <Input value="{local>Remark}"/>
                        </table:template>
                    </table:Column>
                    <table:Column width="10rem" label="{i18n>StandardPrice}" hAlign="End">
                        <table:template>
                            <Text text="{ path:'local>StandardPrice',formatter:'handler.formatter.formatNumber' } {local>Currency}" wrapping="false"/>
                        </table:template>
                    </table:Column>
                    <table:Column width="10rem" label="{i18n>TotalAmount}" hAlign="End">
                        <table:template>
                            <Text text="{ path:'local>TotalAmount',formatter:'handler.formatter.formatNumber' } {local>Currency}" wrapping="false"/>
                        </table:template>
                    </table:Column>
                    <!-- <table:Column width="8rem" label="{i18n>OrderIsClosed}">
                        <table:template>
                            <Text text="{ path:'local>OrderIsClosed',formatter:'handler.formatter.formatOrderStatus' }" wrapping="false"/>
                        </table:template>
                    </table:Column> -->
                </table:columns>
            </table:Table>
        </Panel>
    </Dialog>
</core:FragmentDefinition>