<mvc:View
    controllerName="pp.ofpartition.controller.OFPartition"
    displayBlock="true"
    xmlns:core="sap.ui.core"
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:unified="sap.ui.unified"
    xmlns:t="sap.ui.table"
    xmlns:rm="sap.ui.table.rowmodes"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:smartFilterBar="sap.ui.comp.smartfilterbar"
    xmlns:smartTable="sap.ui.comp.smarttable"
    xmlns:sv="sap.ui.comp.smartvariants"
    height="100%"
    busyIndicatorDelay="0"
>
    <f:DynamicPage id="idDynamicPage">
        <f:title>
            <f:DynamicPageTitle id="idDynamicPageTitle">
                <f:heading>
                    <sv:SmartVariantManagement
                        id="idSmartVariantManagement"
                        showShare="true"
                        persistencyKey="uploadOFPartitionFilter"
                        showExecuteOnSelection="true"
                        entitySet="OFPartitionSet"
                    />
                </f:heading>
            </f:DynamicPageTitle>
        </f:title>
        <f:header>
            <f:DynamicPageHeader id="idDynamicPageHeader">
                <f:content>
                    <!--数据查询-->
                    <smartFilterBar:SmartFilterBar
                        id="idSmartFilterBar"
                        smartVariant="idSmartVariantManagement"
                        persistencyKey="uploadOFPartition"
                        entitySet="OFPartitionSet"
                        useToolbar="false"
                        class="sapUiResponsiveMargin"
                        search="onSearch"
                    >
                        <smartFilterBar:controlConfiguration>
                            <smartFilterBar:ControlConfiguration
                                key="Customer"
                                visibleInAdvancedArea="true"
                                label="{i18n>Customer}"
                                mandatory="notMandatory"
                                index="1"
                            />
                            <smartFilterBar:ControlConfiguration
                                key="Plant"
                                visibleInAdvancedArea="true"
                                label="{i18n>Plant}"
                                mandatory="notMandatory"
                                index="3"
                            />
                            <smartFilterBar:ControlConfiguration
                                key="Material"
                                visibleInAdvancedArea="true"
                                label="{i18n>Material}"
                                mandatory="notMandatory"
                                index="5"
                            />
                            <smartFilterBar:ControlConfiguration
                                key="SplitRange"
                                visibleInAdvancedArea="true"
                                label="{i18n>SplitRange}"
                                mandatory="mandatory"
                                index="6"
                                visible="true"
                            >
                                <smartFilterBar:customControl>
                                    <DateRangeSelection
                                        id="idDateRangeSelection"
                                        valueFormat="yyyyMM"
                                        displayFormat="yyyyMM"
                                    />
                                </smartFilterBar:customControl>
                            </smartFilterBar:ControlConfiguration>
                        </smartFilterBar:controlConfiguration>
                    </smartFilterBar:SmartFilterBar>
                </f:content>
            </f:DynamicPageHeader>
        </f:header>
        <f:content>
            <t:Table
                id="reportTable1"
                rows="{local>/OFPartition}"
                selectionMode="Multi"
                class="sapUiSizeCompact"
            >
                <t:rowMode>
                    <rm:Auto id="idAuto" />
                </t:rowMode>
                <t:extension>
                    <OverflowToolbar id="idOverflowToolbar">
                        <Title
                            text="Line Items ({= ${local>/OFPartition}.length})"
                            visible="{= ${local>/OFPartition}.length > 0}"/>
                        <ToolbarSpacer id="idToolbarSpacer" />
                        <Button
                            id="idCreatePIR"
                            icon="sap-icon://create"
                            type="Transparent"
                            text="{i18n>btnCreatePIR}"
                            press="onCreatePIR"
                            enabled="{= ${local>/OFPartition}.length > 0}"
                        />
                        <Button 
                            icon="sap-icon://excel-attachment"
                            type="Transparent"
                            press="onExport"
                            enabled="{= ${local>/OFPartition}.length > 0}"
                        />
                    </OverflowToolbar>
                </t:extension>
                <t:columns>
                    <t:Column
                        width="6rem"
                        sortProperty="Type"
                        hAlign="Center"
                        label="{i18n>Status}"
                    >
                        <t:template>
                            <ObjectStatus
                                state="{
                                    path: 'local>Type',
                                    formatter: '.formatter.setState'
                                }"
                                icon="{
                                    path: 'local>Type',
                                    formatter: '.formatter.setStateIcon'
                                }"
                            />
                        </t:template>
                    </t:Column>
                    <t:Column
                        width="12rem"
                        sortProperty="Message"
                        label="{i18n>Message}"
                    >
                        <t:template>
                            <Text
                                text="{local>Message}"
                                tooltip="{local>Message}"
                                wrapping="false"
                            />
                        </t:template>
                    </t:Column>
                    <t:Column
                        width="8rem"
                        sortProperty="Customer"
                        label="{i18n>Customer}"
                    >
                        <t:template>
                            <Text
                                text="{local>Customer}"
                                tooltip="{local>Customer}"
                                wrapping="false"
                            />
                        </t:template>
                    </t:Column>
                    <t:Column
                        width="5rem"
                        sortProperty="Plant"
                        label="{i18n>Plant}"
                    >
                        <t:template>
                            <Text
                                text="{local>Plant}"
                                tooltip="{local>Plant}"
                                wrapping="false"
                            />
                        </t:template>
                    </t:Column>
                    <t:Column
                        width="10rem"
                        sortProperty="Material"
                        label="{i18n>Material}"
                    >
                        <t:template>
                            <Text
                                text="{local>Material}"
                                tooltip="{local>Material}"
                                wrapping="false"
                            />
                        </t:template>
                    </t:Column>
                    <t:Column
                        width="10rem"
                        sortProperty="MaterialByCustomer"
                        label="{i18n>MaterialByCustomer}"
                    >
                        <t:template>
                            <Text
                                text="{local>MaterialByCustomer}"
                                tooltip="{local>MaterialByCustomer}"
                                wrapping="false"
                            />
                        </t:template>
                    </t:Column>
                    <t:Column
                        width="12rem"
                        sortProperty="MaterialName"
                        label="{i18n>MaterialName}"
                    >
                        <t:template>
                            <Text
                                text="{local>MaterialName}"
                                tooltip="{local>MaterialName}"
                                wrapping="false"
                            />
                        </t:template>
                    </t:Column>
                </t:columns>
            </t:Table>
        </f:content>
    </f:DynamicPage>
</mvc:View>